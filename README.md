# Тестовое задание SaaSoft - Управление учетными записями

Тестовое задание на позицию Middle Frontend разработчика (Vue.js) в компании SaaSoft.

## Описание проекта

Это приложение для управления учетными записями, разработанное с использованием Vue 3, TypeScript и Vite. Приложение позволяет добавлять, редактировать и удалять учетные записи с различными типами аутентификации (LDAP и локальная).

## Основные функции

- Добавление новых учетных записей
- Редактирование существующих записей
- Удаление учетных записей
- Валидация данных с использованием Zod
- Сохранение данных в localStorage
- Поддержка двух типов учетных записей:
  - LDAP
  - Локальная
- Возможность добавления меток к учетным записям (разделитель ;)

## Технологии

- **Vue 3** с Composition API (`<script setup>`)
- **TypeScript** для типизации
- **Vite** в качестве инструмента сборки
- **Pinia** для управления состоянием
- **PrimeVue** компоненты UI
- **TailwindCSS** для стилизации
- **Zod** для валидации данных
- **Lodash-es** для вспомогательных функций

## Установка и запуск

### Требования

- Node.js (рекомендуется LTS версия)
- npm или yarn

### Установка зависимостей

```bash
npm install
```

или

```bash
yarn install
```

### Запуск в режиме разработки

```bash
npm run dev
```

или

```bash
yarn dev
```

### Сборка проекта

```bash
npm run build
```

или

```bash
yarn build
```

### Предварительный просмотр сборки

```bash
npm run preview
```

или

```bash
yarn preview
```

## Структура проекта

```
src/
├── components/
│   ├── AccountManagementForm.vue  # Основной компонент управления учетными записями
│   ├── AccountEditForm.vue        # Компонент для редактирования учетной записи
│   └── AccountTableRow.vue        # Компонент строки таблицы учетных записей
├── composables/
│   ├── useValidation.ts           # Пользовательский хук для валидации
│   └── useAccounts.ts             # Пользовательский хук для работы с учетными записями
├── services/
│   ├── accountBusinessService.ts    # Сервис с бизнес-логикой для работы с учетными записями
│   ├── accountFormattingService.ts  # Сервис для форматирования данных учетных записей
│   ├── accountValidation.ts         # Сервис для валидации учетных записей
│   └── localStorageService.ts       # Сервис для работы с localStorage
├── store/
│   └── index.ts                   # Хранилище Pinia для управления состоянием
├── types/
│   └── accountTypes.ts            # Типы и интерфейсы для учетных записей
├── di/
│   └── container.ts               # Контейнер для внедрения зависимостей
├── schemas/
│   └── accountSchema.ts           # Схемы валидации Zod
├── App.vue                        # Корневой компонент приложения
└── main.ts                        # Точка входа приложения
```

## Особенности реализации

### Валидация данных

В проекте реализована валидация данных с использованием библиотеки Zod. Валидация происходит при потере фокуса (blur) с поля ввода. Для валидации используется отдельный сервис `accountValidation.ts`, который содержит схемы валидации и методы для проверки данных.

### Локальное хранение данных

Данные сохраняются в localStorage браузера с использованием debounce для оптимизации производительности. Логика работы с localStorage вынесена в отдельный сервис `localStorageService.ts`. Бизнес-логика сохранения и загрузки учетных записей находится в `accountBusinessService.ts`.

### Компонент AccountManagementForm

Основной компонент приложения, реализующий таблицу с возможностью:

- Добавления новых записей
- Редактирования существующих записей
- Удаления записей
- Отображения ошибок валидации

В этом компоненте используется хук `useAccounts` для работы с учетными записями и сервис `accountBusinessService` для бизнес-логики.

### Работа с типами учетных записей

Типы учетных записей реализованы с использованием паттерна "Фабрика". Это позволяет легко добавлять новые типы учетных записей без изменения существующего кода. Все типы находятся в файле `accountTypes.ts`.

### Форматирование данных

Логика форматирования данных (например, преобразование массива меток в строку и обратно) вынесена в отдельный сервис `accountFormattingService.ts`.

### Внедрение зависимостей

Для управления зависимостями между сервисами реализована простая система внедрения зависимостей (DI Container) в файле `container.ts`.

## Разработка

### Компоненты PrimeVue

В проекте используются следующие компоненты PrimeVue:

- DataTable - для отображения таблицы учетных записей
- Select - для выбора типа учетной записи
- InputText - для ввода текстовых данных
- Password - для ввода пароля
- Button - для кнопок действий
- Message - для отображения информационного сообщения

### Состояние приложения

Управление состоянием реализовано с помощью Pinia. Хранилище содержит массив учетных записей и методы для их добавления и удаления.

### Валидация

Валидация реализована в пользовательском хуке `useValidation`, который использует Zod для проверки данных. Схемы валидации определены в файле `accountSchema.ts` и импортируются в `accountValidation.ts`.

## Возможности для улучшения

Подробные предложения по улучшению сохранены в файле IMPROVEMENT_SUGGESTIONS.md.

## Обратная связь по тестовому заданию

- [x] Валидация работает некорректно, если есть валидная запись, то по анфокусу она должна сохранятся. Сейчас если есть валидная и невалидная записи, то сохранения валидной не будет.
- Нарушения SRP (форматирование, валидацию, типы нужно выносить отдельно)
- Слабая декомпозиция -> Нарушения SOLID
- [x] Работу с LS (видимо localStorage) нужно выносить в хук

**Задание не выполнено**

## Работа над ошибками

- Исправил валидацию, теперь если отдельная запись валидна, то она сохраняется в localStorage. Не валидные записи не сохраняются.
- Работа с localStorage вынесена в отдельный модуль, где сервис работы с localStorage реализован через класс
- Исправлены нарушения принципов SOLID:
  - Принцип единственной ответственности (SRP): компоненты и функции разделены по отдельным модулям
  - Принцип открытости/закрытости (OCP): добавлена фабрика типов учетных записей для легкого расширения
  - Принцип подстановки Барбары Лисков (LSP): унифицированы типы данных
  - Принцип разделения интерфейса (ISP): созданы специализированные интерфейсы и хуки
  - Принцип инверсии зависимостей (DIP): внедрены зависимости через интерфейсы
- Улучшена декомпозиция проекта с четким разделением на компоненты, сервисы, хуки и интерфейсы
- Подробные предложения по улучшению сохранены в файле IMPROVEMENT_SUGGESTIONS.md
- Частично реализована новая архитектура с разделением компонентов и сервисов
- Создана система внедрения зависимостей (DI Container)